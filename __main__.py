
#!/usr/bin/env python
# -*- coding: utf-8 -*-
#-----------------------------------------------------------------------------------------------------------------------
# dependencies
#-----------------------------------------------------------------------------------------------------------------------
from argparse import ArgumentParser
from sys      import exit
from colorama import init
from Log      import Log
#-----------------------------------------------------------------------------------------------------------------------
# commands
#-----------------------------------------------------------------------------------------------------------------------
from CheckUUIDS import main as CheckUUIDS
#-----------------------------------------------------------------------------------------------------------------------
# main
#-----------------------------------------------------------------------------------------------------------------------
def main(param):
    # select command
    return {
            'check-uuids': CheckUUIDS
    }[param.cmd](param)
#-----------------------------------------------------------------------------------------------------------------------
# parse input
#-----------------------------------------------------------------------------------------------------------------------
def parseinput(name, version, config):
    #
    # create parser
    #
    parser = ArgumentParser(description=name)
    #
    # add option
    #
    for p in config:
        parser.add_argument(*p['opt'], ** p['settings'])
    #
    #
    return parser.parse_args()
#-----------------------------------------------------------------------------------------------------------------------
# entry point
#-----------------------------------------------------------------------------------------------------------------------
from sys import exit
#
if __name__ == '__main__':
    # -------------------- options -----------------------------------------------
    params = parseinput('ToolSar', '1.0.0', [{
            'opt': ['cmd'], 'settings': {
            'help': 'commands',
            'choices': ['check-uuids']
        }}, {
            'opt': ['path'], 'settings': {
            'help': 'path',
            'nargs':1,
            'metavar':'PATH'
        }}, {
            'opt': ['-f', '--filter'], 'settings': {
            'help': 'filter',
            'nargs':'?',
            'default': None
        }}
    ])
    # --------------- main ---------------------------------------------------------
    init()
    try:
        res = main(params)
    except Exception as inst:
        Log.error('error:%s'%(inst)) 
        exit(-1)
    #
    exit(res)
#-----------------------------------------------------------------------------------------------------------------------
# end
#-----------------------------------------------------------------------------------------------------------------------